<!--
╔══════════════════════════════════════════════════════════════════════════════╗
  VLEP Mission v3.8 - Application de gestion des prélèvements VLEP
  © 2025 Quentin THOMAS - Tous droits réservés
╚══════════════════════════════════════════════════════════════════════════════╝
-->
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="VLEP Mission">
  <meta name="theme-color" content="#2d3039">
  <meta name="author" content="Quentin THOMAS">
  <meta name="copyright" content="© 2025 Quentin THOMAS - Tous droits réservés">

  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon-192.png">

  <!-- CSS -->
  <link rel="stylesheet" href="css/main.css">

  <!-- SheetJS pour export Excel -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <title>VLEP Mission v3.8 - © Quentin THOMAS</title>
</head>
<body>

  <!-- ===== SPLASH SCREEN ===== -->
  <div class="splash" id="splash">
    <svg class="splash-logo" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="sg" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#d0d5dd"/>
          <stop offset="50%" style="stop-color:#a8aeb8"/>
          <stop offset="100%" style="stop-color:#9098a4"/>
        </linearGradient>
      </defs>
      <rect x="20" y="20" width="472" height="472" rx="110" fill="url(#sg)"/>
      <rect x="22" y="22" width="468" height="468" rx="108" fill="none" stroke="rgba(255,255,255,0.5)" stroke-width="2"/>
      <polygon points="140,100 205,100 256,300 307,100 372,100 280,370 232,370" fill="#2d3039"/>
      <rect x="218" y="378" width="76" height="5" rx="2.5" fill="#0066b3"/>
      <text x="256" y="460" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#2d3039">VLEP MISSION</text>
    </svg>
    <div class="splash-title">VLEP</div>
    <div class="splash-bar"></div>
    <div class="splash-subtitle">MISSION</div>
    <div class="splash-copy">© 2025 Quentin THOMAS</div>
  </div>

  <!-- ===== APP CONTAINER ===== -->
  <div id="app"></div>

  <!-- ===== SCRIPTS (ordre de chargement important) ===== -->
  
  <!-- 1. CORE - Modules de base -->
  <script src="js/core/state.js"></script>
  <script src="js/core/icons.js"></script>
  <script src="js/core/utils.js"></script>
  <script src="js/core/database.js"></script>
  
  <!-- 2. VIEWS - Vues principales -->
  <script src="js/views/prepa.js"></script>
  <script src="js/views/terrain.js"></script>
  
  <!-- 3. FEATURES - Fonctionnalités avancées -->
  <script src="js/features/auto-save.js"></script>
  <script src="js/features/drag-drop.js"></script>
  <script src="js/features/export-excel.js"></script>
  <script src="js/features/export-activite.js"></script>
  <script src="js/features/search-echantillons.js"></script>
  
  <!-- 4. APP - Initialisation & routeur principal -->
  <script src="js/app.js"></script>

  <!-- Service Worker pour mode hors-ligne -->
  <script>
    if('serviceWorker' in navigator){
      window.addEventListener('load',function(){
        navigator.serviceWorker.register('sw.js').then(function(reg){
          console.log('✓ Service Worker enregistré',reg.scope);
        }).catch(function(err){
          console.log('✗ Erreur Service Worker',err);
        });
      });
    }
  </script>

  <!-- Auto-save -->
  <script>
    window.addEventListener('load',function(){
      if(typeof initAutoSave === 'function'){
        initAutoSave();
      }
    });
  </script>

</body>
</html>
